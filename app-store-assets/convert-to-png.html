<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG to PNG Converter - App Store Assets</title>
    <style>
        body {
            font-family: 'Inter', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            color: white;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        .asset-group {
            margin: 30px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .asset-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #f8fafc;
        }
        .preview-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 15px 0;
        }
        .preview {
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
        }
        .btn {
            background: linear-gradient(135deg, #4A90E2, #357ABD);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        }
        .download-link {
            display: inline-block;
            margin: 10px 10px 10px 0;
        }
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            border-left: 4px solid #4A90E2;
        }
        canvas {
            display: none;
        }
        .status-message {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
        }
        .status-success {
            background: rgba(108, 207, 127, 0.2);
            border: 1px solid rgba(108, 207, 127, 0.5);
            color: #6BCF7F;
        }
        .status-error {
            background: rgba(255, 71, 87, 0.2);
            border: 1px solid rgba(255, 71, 87, 0.5);
            color: #FF4757;
        }
        .status-info {
            background: rgba(74, 144, 226, 0.2);
            border: 1px solid rgba(74, 144, 226, 0.5);
            color: #4A90E2;
        }
        .fallback-btn {
            background: linear-gradient(135deg, #50C878, #45B068);
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® App Store Assets Converter</h1>
        <p style="text-align: center; font-size: 1.1em; opacity: 0.9;">Convert SVG assets to PNG format for app store submissions</p>
        
        <div class="asset-group">
            <div class="asset-title">üì± App Icon - 512x512 (High Resolution)</div>
            <div class="preview-container">
                <div class="preview">
                    <img id="icon512Preview" width="100" height="100" alt="512x512 Icon Preview">
                </div>
                <div>
                    <p>High-resolution app icon for app store listings and large displays</p>
                    <div class="download-link">
                        <button class="btn" onclick="convertAndDownload('app-icon-512x512.svg', 512, 512, 'app-icon-512x512.png')">
                            üì• Download PNG (512x512)
                        </button>
                        <button class="btn fallback-btn" onclick="generateFallbackAndDownload(512, 512, 'app-icon-512x512-fallback.png', 'icon')">
                            üé≤ Generate Fallback
                        </button>
                    </div>
                    <div id="status512" class="status-message" style="display: none;"></div>
                </div>
            </div>
        </div>

        <div class="asset-group">
            <div class="asset-title">üì± App Icon - 114x114 (Standard)</div>
            <div class="preview-container">
                <div class="preview">
                    <img id="icon114Preview" width="114" height="114" alt="114x114 Icon Preview">
                </div>
                <div>
                    <p>Standard app icon for iOS and other platforms</p>
                    <div class="download-link">
                        <button class="btn" onclick="convertAndDownload('app-icon-114x114.svg', 114, 114, 'app-icon-114x114.png')">
                            üì• Download PNG (114x114)
                        </button>
                        <button class="btn fallback-btn" onclick="generateFallbackAndDownload(114, 114, 'app-icon-114x114-fallback.png', 'icon')">
                            üé≤ Generate Fallback
                        </button>
                    </div>
                    <div id="status114" class="status-message" style="display: none;"></div>
                </div>
            </div>
        </div>

        <div class="asset-group">
            <div class="asset-title">üñºÔ∏è Feature Graphic - 1280x800 (Banner)</div>
            <div class="preview-container">
                <div class="preview">
                    <img id="featurePreview" width="320" height="200" alt="Feature Graphic Preview">
                </div>
                <div>
                    <p>Promotional banner image for app store feature sections</p>
                    <div class="download-link">
                        <button class="btn" onclick="convertAndDownload('feature-graphic-1280x800.svg', 1280, 800, 'feature-graphic-1280x800.png')">
                            üì• Download PNG (1280x800)
                        </button>
                        <button class="btn fallback-btn" onclick="generateFallbackAndDownload(1280, 800, 'feature-graphic-1280x800-fallback.png', 'banner')">
                            üé≤ Generate Fallback
                        </button>
                    </div>
                    <div id="statusFeature" class="status-message" style="display: none;"></div>
                </div>
            </div>
        </div>

        <div class="asset-group">
            <div class="asset-title">üìù App Store Description</div>
            <p>Marketing-optimized description for app store submissions</p>
            <div class="download-link">
                <button class="btn" onclick="downloadDescription()">
                    üì• Download Description Text
                </button>
            </div>
        </div>

        <div class="instructions">
            <h3>üìã Usage Instructions</h3>
            <ol>
                <li><strong>Download PNG files</strong> by clicking the buttons above</li>
                <li><strong>Use the 512x512 icon</strong> for Google Play Store, Amazon Appstore, and other high-res requirements</li>
                <li><strong>Use the 114x114 icon</strong> for iOS App Store and standard icon requirements</li>
                <li><strong>Use the feature graphic</strong> for promotional banners and store feature sections</li>
                <li><strong>Copy the description text</strong> for your app store listing</li>
            </ol>
            <p><strong>Note:</strong> All assets are optimized for professional app store submissions and follow platform guidelines.</p>
        </div>
    </div>

    <canvas id="conversionCanvas"></canvas>

    <script>
        // Show status message
        function showStatus(elementId, message, type) {
            const statusEl = document.getElementById(elementId);
            statusEl.textContent = message;
            statusEl.className = `status-message status-${type}`;
            statusEl.style.display = 'block';
            setTimeout(() => {
                statusEl.style.display = 'none';
            }, 5000);
        }

        // Load and display SVG previews with fallback
        function loadPreviews() {
            loadPreviewWithFallback('icon512Preview', 'app-icon-512x512.svg', 512, 512, 'icon');
            loadPreviewWithFallback('icon114Preview', 'app-icon-114x114.svg', 114, 114, 'icon');
            loadPreviewWithFallback('featurePreview', 'feature-graphic-1280x800.svg', 1280, 800, 'banner');
        }

        function loadPreviewWithFallback(previewId, svgFile, width, height, type) {
            const img = document.getElementById(previewId);

            // Try to load SVG first
            fetch(svgFile)
                .then(response => {
                    if (!response.ok) throw new Error('SVG not found');
                    return response.text();
                })
                .then(svgText => {
                    const blob = new Blob([svgText], { type: 'image/svg+xml' });
                    const url = URL.createObjectURL(blob);
                    img.src = url;
                })
                .catch(error => {
                    console.log(`SVG ${svgFile} not found, generating fallback preview`);
                    // Generate fallback preview
                    generateFallbackImage(width, height, type, (dataUrl) => {
                        img.src = dataUrl;
                    });
                });
        }

        // Enhanced SVG to PNG conversion with better error handling
        function convertAndDownload(svgFile, width, height, outputName) {
            const statusId = getStatusId(outputName);
            showStatus(statusId, 'Converting SVG to PNG...', 'info');

            const canvas = document.getElementById('conversionCanvas');
            const ctx = canvas.getContext('2d');

            // Set high DPI for better quality
            const scale = 2;
            canvas.width = width * scale;
            canvas.height = height * scale;
            ctx.scale(scale, scale);

            const img = new Image();
            img.crossOrigin = 'anonymous';

            img.onload = function() {
                try {
                    ctx.clearRect(0, 0, width, height);
                    ctx.drawImage(img, 0, 0, width, height);

                    canvas.toBlob(function(blob) {
                        if (blob) {
                            const url = URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = outputName;
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            URL.revokeObjectURL(url);
                            showStatus(statusId, 'PNG downloaded successfully!', 'success');
                        } else {
                            throw new Error('Failed to create blob');
                        }
                    }, 'image/png', 1.0);
                } catch (error) {
                    console.error('Canvas conversion error:', error);
                    showStatus(statusId, 'Conversion failed. Try the fallback generator.', 'error');
                }
            };

            img.onerror = function() {
                console.error('Image load error for:', svgFile);
                showStatus(statusId, 'SVG load failed. Try the fallback generator.', 'error');
            };

            // Enhanced SVG loading with better CORS handling
            fetch(svgFile)
                .then(response => {
                    if (!response.ok) throw new Error(`HTTP ${response.status}`);
                    return response.text();
                })
                .then(svgText => {
                    // Clean and optimize SVG for conversion
                    const cleanedSvg = svgText
                        .replace(/xmlns:xlink="[^"]*"/g, '')
                        .replace(/xlink:/g, '');

                    const blob = new Blob([cleanedSvg], { type: 'image/svg+xml;charset=utf-8' });
                    const url = URL.createObjectURL(blob);
                    img.src = url;

                    // Clean up after a delay
                    setTimeout(() => URL.revokeObjectURL(url), 1000);
                })
                .catch(error => {
                    console.error('Fetch error:', error);
                    showStatus(statusId, `SVG file not found: ${svgFile}. Use fallback generator.`, 'error');
                });
        }

        function getStatusId(outputName) {
            if (outputName.includes('512x512')) return 'status512';
            if (outputName.includes('114x114')) return 'status114';
            if (outputName.includes('1280x800')) return 'statusFeature';
            return 'status512';
        }

        // Generate fallback placeholder images
        function generateFallbackImage(width, height, type, callback) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = width;
            canvas.height = height;

            // Create gradient background
            const gradient = ctx.createLinearGradient(0, 0, width, height);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(0.5, '#764ba2');
            gradient.addColorStop(1, '#f093fb');

            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);

            if (type === 'icon') {
                generateIconFallback(ctx, width, height);
            } else if (type === 'banner') {
                generateBannerFallback(ctx, width, height);
            }

            callback(canvas.toDataURL('image/png'));
        }

        function generateIconFallback(ctx, width, height) {
            const centerX = width / 2;
            const centerY = height / 2;
            const phoneWidth = width * 0.3;
            const phoneHeight = height * 0.5;

            // Draw phone outline
            ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
            ctx.fillRect(centerX - phoneWidth/2, centerY - phoneHeight/2, phoneWidth, phoneHeight);

            // Draw screen
            ctx.fillStyle = '#4A90E2';
            const screenMargin = phoneWidth * 0.1;
            ctx.fillRect(
                centerX - phoneWidth/2 + screenMargin,
                centerY - phoneHeight/2 + screenMargin,
                phoneWidth - screenMargin * 2,
                phoneHeight - screenMargin * 3
            );

            // Draw app grid
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            const gridSize = phoneWidth * 0.08;
            const gridSpacing = phoneWidth * 0.12;
            const startX = centerX - gridSpacing;
            const startY = centerY - gridSpacing;

            for (let row = 0; row < 3; row++) {
                for (let col = 0; col < 3; col++) {
                    ctx.fillRect(
                        startX + col * gridSpacing,
                        startY + row * gridSpacing,
                        gridSize,
                        gridSize
                    );
                }
            }

            // Draw text
            ctx.fillStyle = 'white';
            ctx.font = `bold ${width * 0.08}px Inter, Arial, sans-serif`;
            ctx.textAlign = 'center';
            ctx.fillText('CAG', centerX, centerY + phoneHeight/2 + width * 0.1);
        }

        function generateBannerFallback(ctx, width, height) {
            // Draw title
            ctx.fillStyle = 'white';
            ctx.font = `bold ${height * 0.08}px Inter, Arial, sans-serif`;
            ctx.textAlign = 'left';
            ctx.fillText('CORDOVA APP GENERATOR', width * 0.08, height * 0.25);

            // Draw subtitle
            ctx.font = `600 ${height * 0.04}px Inter, Arial, sans-serif`;
            ctx.fillText('Create Multiple Mobile Apps Instantly', width * 0.08, height * 0.35);

            // Draw feature bullets
            ctx.font = `500 ${height * 0.025}px Inter, Arial, sans-serif`;
            const features = [
                'üöÄ Generate up to 10 apps simultaneously',
                'üé® Professional templates & themes',
                'üåê Automatic GitHub integration',
                'üì± Production-ready Cordova projects'
            ];

            features.forEach((feature, index) => {
                ctx.fillText(feature, width * 0.08, height * 0.45 + index * height * 0.05);
            });

            // Draw phones on the right
            const phoneX = width * 0.7;
            const phoneY = height * 0.5;
            const phoneWidth = width * 0.08;
            const phoneHeight = height * 0.25;

            // Main phone
            ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
            ctx.fillRect(phoneX - phoneWidth/2, phoneY - phoneHeight/2, phoneWidth, phoneHeight);

            ctx.fillStyle = '#4A90E2';
            ctx.fillRect(
                phoneX - phoneWidth/2 + phoneWidth * 0.1,
                phoneY - phoneHeight/2 + phoneHeight * 0.1,
                phoneWidth * 0.8,
                phoneHeight * 0.7
            );

            // Side phones
            ctx.save();
            ctx.translate(phoneX - width * 0.12, phoneY - height * 0.15);
            ctx.rotate(-0.2);
            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
            ctx.fillRect(-phoneWidth/3, -phoneHeight/3, phoneWidth * 0.6, phoneHeight * 0.6);
            ctx.restore();

            ctx.save();
            ctx.translate(phoneX + width * 0.12, phoneY + height * 0.1);
            ctx.rotate(0.15);
            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
            ctx.fillRect(-phoneWidth/3, -phoneHeight/3, phoneWidth * 0.6, phoneHeight * 0.6);
            ctx.restore();
        }

        // Generate and download fallback image
        function generateFallbackAndDownload(width, height, outputName, type) {
            const statusId = getStatusId(outputName);
            showStatus(statusId, 'Generating fallback image...', 'info');

            generateFallbackImage(width, height, type, (dataUrl) => {
                // Convert data URL to blob and download
                fetch(dataUrl)
                    .then(res => res.blob())
                    .then(blob => {
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = outputName;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                        showStatus(statusId, 'Fallback image downloaded successfully!', 'success');
                    })
                    .catch(error => {
                        console.error('Fallback generation error:', error);
                        showStatus(statusId, 'Fallback generation failed.', 'error');
                    });
            });
        }

        // Download app store description
        function downloadDescription() {
            fetch('app-store-description.md')
                .then(response => {
                    if (!response.ok) throw new Error('Description file not found');
                    return response.text();
                })
                .then(text => {
                    const blob = new Blob([text], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'app-store-description.txt';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                })
                .catch(error => {
                    console.error('Error loading description:', error);
                    // Generate fallback description
                    const fallbackText = `Cordova App Generator - Create Multiple Mobile Apps Instantly

Transform your ideas into professional mobile applications with our powerful web-based tool.

Key Features:
‚Ä¢ Generate up to 10 diverse mobile apps simultaneously
‚Ä¢ Professional templates for Weather, Productivity, Utilities, and more
‚Ä¢ Automatic GitHub integration and deployment
‚Ä¢ Production-ready Cordova projects with modern code
‚Ä¢ No coding required - user-friendly interface

Perfect for developers, entrepreneurs, and businesses looking to rapidly prototype and deploy mobile applications.

Download now and start creating professional mobile apps in minutes!`;

                    const blob = new Blob([fallbackText], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'app-store-description-fallback.txt';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                });
        }

        // Load previews when page loads
        window.addEventListener('load', loadPreviews);
    </script>
</body>
</html>
